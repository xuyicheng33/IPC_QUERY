# IPC_QUERY 环境变量配置示例
# 复制此文件为 .env 并根据实际情况修改

# === 数据库配置 ===
# SQLite 数据库文件路径
DATABASE_PATH=data/ipc.sqlite
# 可选：DATABASE_PATH 为空时可用 sqlite URL
# 相对路径示例：sqlite:./data/ipc.sqlite
# 绝对路径示例：sqlite:////app/data/ipc.sqlite
# DATABASE_URL=sqlite:./data/ipc.sqlite

# === 服务配置 ===
# 监听地址
HOST=127.0.0.1
# 监听端口
PORT=8791
# 调试模式 (true/false)
DEBUG=false

# === 文件路径配置 ===
# 静态文件目录
STATIC_DIR=web
# PDF 文件目录（用于 /pdf 与 /render，留空则使用 UPLOAD_DIR）
PDF_DIR=
# 上传目录（可选；未设置时跟随 PDF_DIR，若两者都为空则默认 data/pdfs）
UPLOAD_DIR=
# 缓存目录
CACHE_DIR=tmp/cache

# === 性能配置 ===
# 缓存大小
CACHE_SIZE=1000
# 缓存过期时间 (秒)
CACHE_TTL=300
# 渲染工作线程数
RENDER_WORKERS=4
# 渲染超时时间 (秒)
RENDER_TIMEOUT=30.0
# 渲染并发信号量
RENDER_SEMAPHORE=4
# 导入文件最大大小（MB）
IMPORT_MAX_FILE_SIZE_MB=100
# 导入队列长度
IMPORT_QUEUE_SIZE=8
# 导入任务超时预算（秒）
IMPORT_JOB_TIMEOUT_S=600
# 内存中保留的导入任务数量上限
IMPORT_JOBS_RETAINED=1000
# 导入模式：auto|enabled|disabled
# auto: 自动检测数据库/目录写权限
# enabled: 强制尝试启用（写条件不足会自动降级并告警）
# disabled: 永久禁用导入/删除/重扫
IMPORT_MODE=auto

# === Docker 运行（可选）===
# 宿主机 PDF 目录挂载路径（用于 docker-compose.yml）
PDF_HOST_DIR=./data/pdfs
# PDF 挂载模式：ro（只读查询）| rw（允许导入/删除/重扫）
PDF_MOUNT_MODE=ro

# === 日志配置 ===
# 日志级别 (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO
# 日志格式 (json, text)
LOG_FORMAT=json

# === 搜索配置 ===
# 默认分页大小
DEFAULT_PAGE_SIZE=20
# 最大分页大小
MAX_PAGE_SIZE=100
