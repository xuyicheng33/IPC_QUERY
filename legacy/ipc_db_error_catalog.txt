IPC 老库 ipc.db 错误类型梳理（基于 PDF 原文对照）

目的
- 找出 ipc.db 中“确认为错”的抽取类型与典型案例，作为后续建库/回归校验的禁区清单。

核查方法（可复现）
- 数据来源：`ipc.db` 表 `ipc_rows`（字段：`source_pdf`, `start_page`, `part_number`, `fig_item_text`, `nomenclature_text`）。
- PDF 真值：使用 `demo_coords/pdf_truth.py` 以“固定坐标读取表格 PART NUMBER 列 + y 分段”方式，从对应 PDF 页直接抽取 `part_number` 列进行对照。
- 结果抽样：随机抽样 200 行（覆盖 199 个不同页），其 `part_number` 均能在 PDF 真值中命中（错误非常少，属于“局部污染”，不是系统性失真）。

========================
错误类型 1：件号尾部拼入描述词（"<PN> CFM56"）
========================
影响范围（统计）
- 行数：12
- PDF：全部集中在 `71-00___083.pdf`
- 特征：`part_number` 含空格，格式类似：`<真实件号> CFM56`

错误判据（PDF 真值对照）
- 在对应页的 PART NUMBER 列中：
  - `"<PN> CFM56"` 命中为 0
  - `"<PN>"`（去掉空格后的前半段）命中为 1
=> 判定：ipc.db 把 “CFM56” 这种描述词拼进了件号字段。

典型案例（已逐条用 pdf_truth 验证）
- PDF: `71-00___083.pdf` 页 9，FIG ITEM `- 60`
  - ipc.db: `332A2800-385 CFM56`
  - PDF 真值: `332A2800-385`
- PDF: `71-00___083.pdf` 页 9，FIG ITEM `- 61`
  - ipc.db: `332A2800-565 CFM56`
  - PDF 真值: `332A2800-565`
- PDF: `71-00___083.pdf` 页 9，FIG ITEM `- 62`
  - ipc.db: `332A2800-584 CFM56`
  - PDF 真值: `332A2800-584`
- PDF: `71-00___083.pdf` 页 29，FIG ITEM `- 5`
  - ipc.db: `M0DREF295083 CFM56`
  - PDF 真值: `M0DREF295083`

可能成因（推断）
- 旧系统在表格抽取/单元格拼接时把相邻列（或同一行的其他文本块）误拼进 PART NUMBER 字段。

后续建库建议（避免复现）
- 对“表格列读取出的 PART NUMBER”增加硬规则：不允许包含空格；若出现空格，默认取第 1 段并进入“人工复核/回归样例”。

========================
错误类型 2：把 NOMENCLATURE 词误当件号（BOX/MODULE/LIGHT 等，常见“数字化字母”）
========================
影响范围（统计）
- 行数：6
- 涉及假件号（3 个）：`B0X`, `M0DULE`, `L1GHT`
- 共同特征：这些行在 ipc.db 中 `fig_item_text` 为空（不像正常零件行）。

错误判据（PDF 真值对照）
- 在对应页的 PART NUMBER 列中：`B0X/M0DULE/L1GHT` 均命中为 0。
- 同页真值中，NOMENCLATURE 第一行存在 `BOX`/`MODULE`/`LIGHT` 等描述词，且页面上存在其他正常件号行。
=> 判定：ipc.db 出现“列错位/文本块误归类”，把描述词（且伴随 O->0、I->1）当成了件号。

典型案例（已用 pdf_truth 验证）
- 假件号：`B0X`
  - ipc.db 位置：`53-11___083.pdf` 页 1555（FIG ITEM 为空）
  - PDF 真值：该页 PART NUMBER 列包含 `148A8600-9`, `148A8600-13`, `M0DREF80632`...；NOMENCLATURE 出现 `BOX ...`
- 假件号：`M0DULE`（共 4 行）
  - ipc.db 位置：`25-40___083.pdf` 页 342（FIG ITEM 为空）
  - PDF 真值：该页 PART NUMBER 列包含 `D72004213-111A`...；NOMENCLATURE 第一行包含 `MODULE ...`
  - ipc.db 位置：`27-88___083.pdf` 页 34（FIG ITEM 为空）
  - ipc.db 位置：`31-11___083.pdf` 页 1261（FIG ITEM 为空）
  - ipc.db 位置：`34-57___083.pdf` 页 25（FIG ITEM 为空）
- 假件号：`L1GHT`
  - ipc.db 位置：`33-36___083.pdf` 页 53（FIG ITEM 为空）
  - PDF 真值：该页 PART NUMBER 列包含 `M0DREF101387`, `15-0712-6`...；NOMENCLATURE 第一行包含 `LIGHT ...`

后续建库建议（避免复现）
- 对“件号列”的来源做强约束：只接受位于 PART NUMBER 列固定 x 区间内的文本；不要允许从整页自由抓词回填到件号列。
- 将 `fig_item_text` 为空 + `part_number` 短且“像英文单词”的行作为 QA 重点（可加入回归样例）。

========================
附：不属于 ipc.db 错，但对新库校验/回归非常关键
========================
1) 纯数字件号（digits-only）
- ipc.db 中存在约 10,703 行纯数字件号；这些在 PDF 的 PART NUMBER 列中确实存在。
- 当前新库 `ipc_coords_full_v1.sqlite` 中纯数字件号为 0（确定是新系统过滤规则导致的漏抽）。

2) “仅包含数字 0 的短码”会被 0/O 纠错规则误伤
- 例如 `C0ML`, `DEM0KIT`：在 PDF 的 PART NUMBER 列中确实存在，但新库 v1 也会漏。
- 建议：将此类短码加入回归样例，避免未来再漏。
