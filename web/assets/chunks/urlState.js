import{c as i,j as s,B as u,b as d}from"./Card.js";const m=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],p=i("database",m);const h=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],f=i("search",h);function j({title:e="ipc_query_system",actions:r,children:n,contentClassName:o}){const l=r&&r.length>0?r:[{href:"/search",label:"搜索",icon:s.jsx(f,{className:"h-4 w-4","aria-hidden":"true"})},{href:"/db",label:"数据库",icon:s.jsx(p,{className:"h-4 w-4","aria-hidden":"true"})}];return s.jsxs("div",{className:"min-h-screen bg-bg text-text",children:[s.jsx("header",{className:"sticky top-0 z-20 border-b border-border bg-surface",children:s.jsxs("div",{className:"mx-auto flex min-h-16 w-full max-w-[1360px] flex-wrap items-center justify-between gap-3 px-4 py-2 md:px-6",children:[s.jsx("a",{href:"/",className:"text-base font-semibold tracking-tight",children:e}),s.jsx("nav",{className:"flex flex-wrap items-center gap-2","aria-label":"主导航",children:l.map(a=>s.jsx("a",{href:a.href,children:s.jsxs(u,{variant:"ghost",className:"gap-2",children:[a.icon,s.jsx("span",{children:a.label})]})},a.href))})]})}),s.jsx("main",{className:d("mx-auto w-full max-w-[1360px] px-4 py-6 md:px-6",o),children:n})]})}const x=new Set(["pn","term","all"]);function t(e){const r=String(e??"").split("\\").join("/").trim().replace(/^\/+|\/+$/g,"");return r?r.split("/").filter(n=>n&&n!=="."&&n!=="..").join("/"):""}function c(e,r){const n=Number.parseInt(String(e??""),10);return Number.isFinite(n)&&n>0?n:Math.max(1,r)}function g(e){const r=String(e??"").toLowerCase();return x.has(r)?r:"pn"}function S(e){const r=new URLSearchParams(e||"");return{q:(r.get("q")||"").trim(),match:g(r.get("match")),page:c(r.get("page"),1),include_notes:r.get("include_notes")==="1",source_dir:t(r.get("source_dir")||""),source_pdf:(r.get("source_pdf")||"").trim()}}function _(e,r){const n=new URLSearchParams;return e.q&&n.set("q",e.q),n.set("match",e.match),n.set("page",String(c(e.page,1))),n.set("page_size",String(c(r,60))),e.include_notes&&n.set("include_notes","1"),e.source_dir&&n.set("source_dir",e.source_dir),e.source_pdf&&n.set("source_pdf",e.source_pdf),n}function w(e,r=60){return`/search?${_(e,r).toString()}`}function y(e){const r=new URLSearchParams;return e.q&&r.set("q",e.q),e.match&&r.set("match",e.match),e.page&&r.set("page",String(e.page)),e.include_notes&&r.set("include_notes","1"),e.source_dir&&r.set("source_dir",e.source_dir),e.source_pdf&&r.set("source_pdf",e.source_pdf),r}function N(e){const r=new URLSearchParams(e||"");return t(r.get("path")||"")}function q(e){const r=t(e||"");return r?`/db?path=${encodeURIComponent(r)}`:"/db"}export{j as A,f as S,w as a,_ as b,y as c,N as d,q as e,t as n,S as s};
