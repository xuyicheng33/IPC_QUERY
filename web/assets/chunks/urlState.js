import{a as i,j as n,b as u}from"./Card.js";const d=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],m=i("search-x",d),f={neutral:"border-border text-muted bg-surface",ok:"border-accent text-accent bg-accent-soft",bad:"border-danger text-danger bg-[#fff5f5]"};function x({variant:e="neutral",children:r,className:t}){return n.jsx("span",{className:u("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",f[e],t),children:r})}function b({title:e,description:r}){return n.jsxs("div",{className:"flex min-h-[120px] flex-col items-center justify-center rounded-lg border border-dashed border-border bg-surface-soft px-6 py-8 text-center",children:[n.jsx(m,{className:"mb-3 h-5 w-5 text-muted","aria-hidden":"true"}),n.jsx("div",{className:"text-sm font-medium text-text",children:e}),r?n.jsx("p",{className:"mt-1 text-xs text-muted",children:r}):null]})}async function _(e,r={}){const t=await fetch(e,{...r,headers:{Accept:"application/json",...r.headers||{}}});let s={};try{s=await t.json()}catch{s={}}if(!t.ok){const o=s;throw new Error(o?.message||`${t.status} ${t.statusText}`)}return s}const l=new Set(["pn","term","all"]);function a(e){const r=String(e??"").split("\\").join("/").trim().replace(/^\/+|\/+$/g,"");return r?r.split("/").filter(t=>t&&t!=="."&&t!=="..").join("/"):""}function c(e,r){const t=Number.parseInt(String(e??""),10);return Number.isFinite(t)&&t>0?t:Math.max(1,r)}function p(e){const r=String(e??"").toLowerCase();return l.has(r)?r:"pn"}function S(e){const r=new URLSearchParams(e||"");return{q:(r.get("q")||"").trim(),match:p(r.get("match")),page:c(r.get("page"),1),include_notes:r.get("include_notes")==="1",source_dir:a(r.get("source_dir")||""),source_pdf:(r.get("source_pdf")||"").trim()}}function h(e,r){const t=new URLSearchParams;return e.q&&t.set("q",e.q),t.set("match",e.match),t.set("page",String(c(e.page,1))),t.set("page_size",String(c(r,60))),e.include_notes&&t.set("include_notes","1"),e.source_dir&&t.set("source_dir",e.source_dir),e.source_pdf&&t.set("source_pdf",e.source_pdf),t}function j(e,r=60){return`/search?${h(e,r).toString()}`}function y(e){const r=new URLSearchParams;return e.q&&r.set("q",e.q),e.match&&r.set("match",e.match),e.page&&r.set("page",String(e.page)),e.include_notes&&r.set("include_notes","1"),e.source_dir&&r.set("source_dir",e.source_dir),e.source_pdf&&r.set("source_pdf",e.source_pdf),r}function w(e){const r=new URLSearchParams(e||"");return a(r.get("path")||"")}function q(e){const r=a(e||"");return r?`/db?path=${encodeURIComponent(r)}`:"/db"}export{x as B,b as E,j as a,h as b,y as c,w as d,q as e,_ as f,a as n,S as s};
