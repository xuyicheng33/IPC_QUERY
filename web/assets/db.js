import{a as f,r as d,j as t,C as te,B as p,c as Ee,R as Fe}from"./chunks/Card.js";import{A as Ue}from"./chunks/AppShell.js";import{d as se,n as m,e as ae,E as ze,B as J,f as y}from"./chunks/urlState.js";import{I as ne}from"./chunks/Input.js";import{S as Be}from"./chunks/Select.js";import{T as Oe,a as Je,b as T,c as A}from"./chunks/Table.js";import{R as re,F as oe}from"./chunks/refresh-cw.js";import{C as Le}from"./chunks/chevron-right.js";const qe=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],He=f("arrow-up-right",qe);const Ve=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ce=f("check",Ve);const Xe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ze=f("chevron-down",Xe);const We=[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]],Ge=f("folder-input",We);const Ke=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Qe=f("folder-plus",Ke);const Ye=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ie=f("folder",Ye);const et=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],tt=f("loader-circle",et);const st=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],at=f("pencil",st);const nt=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m16 16-1.9-1.9",key:"1dq9hf"}]],rt=f("scan-search",nt);const ot=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],le=f("trash-2",ot);const ct=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],it=f("upload",ct);const lt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],de=f("x",lt);function dt(h){return h==="success"?"success":h==="failed"?"failed":h==="running"?"running":"queued"}function mt(){const[h,me]=d.useState(()=>se(window.location.search)),[w,he]=d.useState(()=>new Map),[pe,U]=d.useState(()=>new Set([""])),[$,L]=d.useState([]),[k,C]=d.useState(()=>new Set),[q,ue]=d.useState([]),[xe,u]=d.useState("加载中..."),[H,fe]=d.useState(""),[ge,ve]=d.useState(!1),[V,X]=d.useState(""),[c,je]=d.useState({import_enabled:!0,scan_enabled:!0,import_reason:"",scan_reason:""}),[ye,z]=d.useState({}),P=d.useRef(null),I=d.useRef(new Set),b=d.useRef(""),Z=d.useRef(new Map),R=d.useRef(null),we=d.useMemo(()=>$.length===0?!1:$.every(e=>k.has(m(e.relative_path||e.name||""))),[$,k]),B=k.size,g=c.import_enabled?"":String(c.import_reason||"导入服务不可用"),W=c.scan_enabled?"":String(c.scan_reason||"重扫服务不可用"),be=d.useMemo(()=>{const e=new Set([""]);for(const[s,a]of w.entries()){e.add(m(s||""));for(const n of a.directories||[])e.add(m(n.path||""))}return Array.from(e.values()).sort((s,a)=>s.localeCompare(a))},[w]),O=e=>ye[e]||{mode:"normal",value:"",error:""},j=(e,s)=>{z(a=>({...a,[e]:s}))},D=e=>{z(s=>{const a={...s};return delete a[e],a})},M=(e,s)=>{const a=dt(e.status),n=e,o=String(n.relative_path||n.filename||n.path||"-"),r=String(e.error||""),i=String(e.job_id||`${s}-${Date.now()}`);s==="import"&&o&&o!=="-"&&Z.current.set(o,a),ue(x=>{const l=`${s}-${i}`,_=x.filter(F=>F.rowId!==l);return _.unshift({rowId:l,kind:s,status:a,pathText:o,error:r,updatedAt:Date.now()}),_.slice(0,80)})},E=async(e,s=!1)=>{const a=m(e||"");if(!s&&w.has(a))return w.get(a);const n=await y(`/api/docs/tree?path=${encodeURIComponent(a)}`),o={path:m(n.path||a),directories:Array.isArray(n.directories)?n.directories:[],files:Array.isArray(n.files)?n.files:[]};return he(r=>{const i=new Map(r);return i.set(o.path,o),o.path!==a&&i.set(a,o),i}),o},Ne=async(e,s=!1)=>{const a=m(e||"");if(await E("",s),!a)return;let n="";for(const o of a.split("/"))n=n?`${n}/${o}`:o,await E(n,s)},v=(e,s=!1)=>{fe(e),ve(s)},Se=async()=>{try{const e=await y("/api/capabilities");je({import_enabled:!!e.import_enabled,scan_enabled:!!e.scan_enabled,import_reason:String(e.import_reason||""),scan_reason:String(e.scan_reason||"")})}catch(e){const s=String(e?.message||e);v(`加载能力信息失败：${s}`,!0)}},_e=e=>{const s=new Set(e.map(a=>m(a.relative_path||a.name||"")));C(a=>{const n=new Set;for(const o of a)s.has(o)&&n.add(o);return n}),z(a=>{const n={};for(const[o,r]of Object.entries(a))s.has(o)&&(n[o]=r);return n})},N=async(e,s)=>{const a=!!s?.push,n=!!s?.force,o=m(e||"");u("加载中...");try{await Ne(o,n);const r=await E(o,n),i=m(r.path||o);me(i),L(r.files||[]),_e(r.files||[]),U(x=>{const l=new Set(x);if(l.add(""),i){let _="";for(const F of i.split("/"))_=_?`${_}/${F}`:F,l.add(_)}return l}),a&&history.pushState({},"",ae(i)),u(`目录 ${i||"/"} · 文件 ${(r.files||[]).length}`)}catch(r){u(`加载失败：${String(r?.message||r)}`),L([])}},S=async()=>{await N(h,{force:!0,push:!1})},G=()=>{R.current!==null&&(window.clearInterval(R.current),R.current=null)},K=()=>{R.current===null&&(R.current=window.setInterval(async()=>{const e=[];for(const s of I.current.values())try{const a=await y(`/api/import/${encodeURIComponent(s)}`);M(a,"import"),["success","failed"].includes(String(a.status||""))&&e.push(s)}catch{e.push(s)}if(e.forEach(s=>I.current.delete(s)),b.current)try{const s=await y(`/api/scan/${encodeURIComponent(b.current)}`);M(s,"scan"),["success","failed"].includes(String(s.status||""))&&(b.current="")}catch{b.current=""}I.current.size===0&&!b.current&&(G(),await S())},1500))},$e=e=>{const s=(e.results||[]).filter(a=>!a.ok);return s.length===0?"":s.slice(0,3).map(a=>{const n=String(a.path||"-");if(String(a.error_code||"").toUpperCase()==="CONFLICT"){const r=Array.isArray(a.details?.candidates)?a.details.candidates.slice(0,3).join(", "):"";return r?`${n}: 命名冲突，请使用完整相对路径，候选: ${r}`:`${n}: 命名冲突，请使用完整相对路径`}return`${n}: ${String(a.error||"unknown error")}`}).join(" | ")},Q=async e=>{if(!c.import_enabled){const r=g||"导入服务不可用";v(`删除不可用：${r}`,!0),u(`删除不可用：${r}`);return}const s=e.map(r=>m(r||"")).filter(Boolean);if(s.length===0)return;const a=s.slice(0,5).join(`
`),n=s.length>5?`
...`:"";if(window.confirm(`确认删除 ${s.length} 个文件？
将删除数据库记录和磁盘文件。

示例路径：
${a}${n}`)){v(""),u(`正在删除 ${s.length} 个文件...`);try{const r=await y("/api/docs/batch-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:s})}),i=$e(r);v(i?`删除完成：成功 ${r.deleted}/${r.total}，失败 ${r.failed}（${i}）`:`删除完成：成功 ${r.deleted}/${r.total}，失败 ${r.failed}`),C(new Set),await S()}catch(r){const i=String(r?.message||r);v(`删除失败：${i}`,!0),u(`删除失败：${i}`)}}},ke=async e=>{if(!c.import_enabled){const s=g||"导入服务不可用";v(`上传不可用：${s}`,!0),u(`上传不可用：${s}`);return}if(e.length===0){u("请选择 PDF 文件");return}u(`准备上传 ${e.length} 个文件...`),v("");for(const s of e)try{const a=await fetch(`/api/import?filename=${encodeURIComponent(s.name)}&target_dir=${encodeURIComponent(h)}`,{method:"POST",headers:{Accept:"application/json","Content-Type":s.type||"application/pdf","X-File-Name":s.name,"X-Target-Dir":h},body:s}),n=await a.json().catch(()=>({}));if(!a.ok)throw new Error(String(n.message||`${a.status} ${a.statusText}`));I.current.add(String(n.job_id)),M(n,"import")}catch(a){M({job_id:`error-${Date.now()}`,filename:s.name,status:"failed",error:String(a?.message||a)},"import")}P.current&&(P.current.value=""),K()},Ce=async e=>{if(e.preventDefault(),!c.import_enabled){const a=g||"导入服务不可用";v(`创建目录不可用：${a}`,!0),u(`创建目录不可用：${a}`);return}const s=V.trim();if(s)try{await y("/api/folders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:h,name:s})}),X(""),await S()}catch(a){u(`创建失败：${String(a?.message||a)}`)}},Re=async()=>{if(!c.scan_enabled){const e=W||"重扫服务不可用";v(`重扫不可用：${e}`,!0),u(`重扫不可用：${e}`);return}try{const e=await y(`/api/scan?path=${encodeURIComponent(h)}`,{method:"POST"});b.current=String(e.job_id||""),b.current&&(M(e,"scan"),K())}catch(e){u(`触发重扫失败：${String(e?.message||e)}`)}};d.useEffect(()=>{const e=()=>{N(se(window.location.search),{push:!1,force:!1})};return window.addEventListener("popstate",e),Se(),N(h,{push:!1,force:!0}),()=>{window.removeEventListener("popstate",e),G()}},[]);const Me=e=>{const s=m(e||"");s&&C(a=>{const n=new Set(a);return n.has(s)?n.delete(s):n.add(s),n})},Te=e=>{if(!e){C(new Set);return}const s=new Set;$.forEach(a=>{const n=m(a.relative_path||a.name||"");n&&s.add(n)}),C(s)},Ae=e=>{const s=e.split("/").pop()||e;j(e,{mode:"renaming",value:s,error:""})},Pe=e=>{j(e,{mode:"moving",value:h,error:""})},Ie=async e=>{if(!c.import_enabled){j(e,{mode:"renaming",value:"",error:g||"导入服务不可用"});return}const s=O(e),a=s.value.trim();if(!a){j(e,{...s,error:"请输入新文件名"});return}try{const n=await y("/api/docs/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,new_name:a})});D(e),v(`改名成功：${n.old_path} -> ${n.new_path}`),await S()}catch(n){const o=String(n?.message||n);j(e,{...s,error:o})}},De=async e=>{if(!c.import_enabled){j(e,{mode:"moving",value:"",error:g||"导入服务不可用"});return}const s=O(e),a=m(s.value||"");try{const n=await y("/api/docs/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,target_dir:a})});D(e),v(`移动成功：${n.old_path} -> ${n.new_path}`),await S()}catch(n){const o=String(n?.message||n);j(e,{...s,error:o})}},Y=(e,s)=>{const a=w.get(e);if(!a)return null;const n=[];for(const o of a.directories||[]){const r=m(o.path||""),i=pe.has(r);n.push(t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:`flex items-center gap-1 rounded-md px-1 py-0.5 ${r===h?"bg-accent-soft":"hover:bg-surface-soft"}`,style:{paddingLeft:`${s*14}px`},children:[t.jsx("button",{type:"button",className:"inline-flex h-6 w-6 items-center justify-center rounded border border-border bg-surface hover:bg-surface-soft",onClick:()=>{if(i){U(x=>{const l=new Set(x);return l.delete(r),l});return}U(x=>{const l=new Set(x);return l.add(r),l}),E(r)},"aria-label":i?"收起目录":"展开目录",children:i?t.jsx(Ze,{className:"h-3.5 w-3.5"}):t.jsx(Le,{className:"h-3.5 w-3.5"})}),t.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-1.5 rounded px-1 py-1 text-left font-mono text-xs hover:bg-surface",onClick:()=>{N(r,{push:!0,force:!1})},children:[t.jsx(ie,{className:"h-3.5 w-3.5 text-muted"}),o.name||r||"-"]})]}),i?t.jsxs(t.Fragment,{children:[(w.get(r)?.files||[]).map(x=>t.jsxs("div",{className:"flex items-center gap-1.5 py-1 text-xs text-muted",style:{paddingLeft:`${(s+1)*14}px`},children:[t.jsx(oe,{className:"h-3.5 w-3.5"}),t.jsx("span",{className:"font-mono",children:x.relative_path||x.name||"-"})]},`file-${x.relative_path}`)),Y(r,s+1)]}):null]},`dir-${r}`))}return n},ee=h?h.split("/"):[];return t.jsx(Ue,{actions:[{href:"/search",label:"搜索"}],children:t.jsxs("div",{className:"grid gap-4 xl:grid-cols-[320px_minmax(0,1fr)]",children:[t.jsxs(te,{className:"grid gap-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-sm font-medium",children:"目录树"}),t.jsxs(p,{variant:"ghost",className:"h-9 gap-2 px-3",onClick:()=>{S()},children:[t.jsx(re,{className:"h-4 w-4"}),"刷新树"]})]}),t.jsxs("div",{className:"min-h-[500px] rounded-md border border-border bg-surface p-2",children:[t.jsx("div",{className:`mb-1 flex items-center rounded-md px-1 py-1 ${h===""?"bg-accent-soft":""}`,children:t.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-1.5 rounded px-1 py-1 text-left font-mono text-xs hover:bg-surface-soft",onClick:()=>{N("",{push:!0,force:!1})},children:[t.jsx(ie,{className:"h-3.5 w-3.5 text-muted"}),"/"]})}),(w.get("")?.files||[]).map(e=>t.jsxs("div",{className:"flex items-center gap-1.5 py-1 pl-4 text-xs text-muted",children:[t.jsx(oe,{className:"h-3.5 w-3.5"}),t.jsx("span",{className:"font-mono",children:e.relative_path||e.name||"-"})]},`root-file-${e.relative_path}`)),Y("",1)]})]}),t.jsxs(te,{className:"grid min-w-0 gap-3",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[t.jsxs("div",{className:"font-mono text-xs",children:[t.jsx("a",{href:"/db",onClick:e=>{e.preventDefault(),N("",{push:!0,force:!1})},className:"text-accent",children:"/"}),ee.map((e,s)=>{const a=ee.slice(0,s+1).join("/");return t.jsxs("span",{children:["/"," ",t.jsx("a",{href:ae(a),onClick:n=>{n.preventDefault(),N(a,{push:!0,force:!1})},className:"text-accent",children:e})]},a)})]}),t.jsx("div",{className:"text-sm text-muted",children:xe})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs(p,{variant:"primary",className:"h-10 gap-2",disabled:!c.import_enabled,title:c.import_enabled?"上传 PDF":g,onClick:()=>{P.current?.click()},children:[t.jsx(it,{className:"h-4 w-4"}),"上传 PDF"]}),t.jsx("input",{ref:P,type:"file",accept:".pdf,application/pdf",multiple:!0,className:"hidden",onChange:e=>{const s=Array.from(e.target.files||[]);ke(s)}}),t.jsxs(p,{variant:"danger",className:"h-10 gap-2",disabled:!c.import_enabled||B===0,title:c.import_enabled?void 0:g,onClick:()=>{Q(Array.from(k))},children:[t.jsx(le,{className:"h-4 w-4"}),"删除所选",B>0?` (${B})`:""]}),t.jsxs(p,{variant:"ghost",className:"h-10 gap-2",disabled:!c.scan_enabled,title:c.scan_enabled?void 0:W,onClick:()=>{Re()},children:[t.jsx(rt,{className:"h-4 w-4"}),"重扫当前目录"]}),t.jsxs(p,{variant:"ghost",className:"h-10 gap-2",onClick:()=>{S()},children:[t.jsx(re,{className:"h-4 w-4"}),"刷新"]})]}),t.jsxs("form",{className:"flex flex-wrap items-center gap-2",onSubmit:Ce,children:[t.jsx("div",{className:"text-sm text-muted",children:"创建子目录"}),t.jsx(ne,{value:V,onChange:e=>X(e.target.value),placeholder:"例如：engine",className:"max-w-[260px]",disabled:!c.import_enabled}),t.jsxs(p,{variant:"ghost",type:"submit",className:"h-10 gap-2",disabled:!c.import_enabled,title:c.import_enabled?void 0:g,children:[t.jsx(Qe,{className:"h-4 w-4"}),"创建"]})]}),H?t.jsx("div",{className:`text-sm ${ge?"text-danger":"text-muted"}`,children:H}):null,$.length===0?t.jsx(ze,{title:"无 PDF 文件"}):t.jsx(Oe,{children:t.jsxs(Je,{children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx(T,{className:"w-[48px]",children:t.jsx("input",{type:"checkbox","aria-label":"全选文件",checked:we,onChange:e=>Te(e.target.checked)})}),t.jsx(T,{children:"文件名"}),t.jsx(T,{children:"入库状态"}),t.jsx(T,{children:"任务状态"}),t.jsx(T,{children:"操作"})]})}),t.jsx("tbody",{children:$.map(e=>{const s=m(e.relative_path||e.name||""),a=!!e.indexed,n=Z.current.get(s)||"queued",o=k.has(s),r=O(s),i=m(r.value||""),x=`/viewer.html?pdf=${encodeURIComponent(s)}&page=1`;return t.jsxs("tr",{className:"group",children:[t.jsx(A,{children:t.jsx("input",{type:"checkbox",checked:o,disabled:!s,onChange:()=>Me(s)})}),t.jsx(A,{className:"font-mono text-xs break-all",children:s||"-"}),t.jsx(A,{children:t.jsx(J,{variant:a?"ok":"neutral",children:a?"indexed":"pending"})}),t.jsx(A,{children:t.jsx(J,{variant:n==="success"?"ok":n==="failed"?"bad":"neutral",children:n})}),t.jsx(A,{className:"min-w-[360px]",children:r.mode==="renaming"?t.jsxs("div",{className:"grid gap-1",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ne,{value:r.value,onChange:l=>j(s,{...r,value:l.target.value,error:""}),className:"h-8",placeholder:"新文件名，如 b.pdf"}),t.jsx(p,{variant:"ghost",className:"h-8 min-w-8 px-2",onClick:()=>{Ie(s)},children:t.jsx(ce,{className:"h-3.5 w-3.5"})}),t.jsx(p,{variant:"ghost",className:"h-8 min-w-8 px-2",onClick:()=>D(s),children:t.jsx(de,{className:"h-3.5 w-3.5"})})]}),r.error?t.jsx("div",{className:"text-xs text-danger",children:r.error}):null]}):r.mode==="moving"?t.jsxs("div",{className:"grid gap-1",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Be,{value:i,className:"h-8",onChange:l=>j(s,{...r,value:m(l.target.value),error:""}),children:be.map(l=>t.jsx("option",{value:l,children:l||"/"},l||"root"))}),t.jsx(p,{variant:"ghost",className:"h-8 min-w-8 px-2",onClick:()=>{De(s)},children:t.jsx(ce,{className:"h-3.5 w-3.5"})}),t.jsx(p,{variant:"ghost",className:"h-8 min-w-8 px-2",onClick:()=>D(s),children:t.jsx(de,{className:"h-3.5 w-3.5"})})]}),r.error?t.jsx("div",{className:"text-xs text-danger",children:r.error}):null]}):t.jsxs("div",{className:"flex items-center gap-1 opacity-100 transition-opacity md:opacity-0 md:group-hover:opacity-100 md:group-focus-within:opacity-100",children:[t.jsx("a",{href:x,target:"_blank",rel:"noreferrer",children:t.jsxs(p,{variant:"ghost",className:"h-8 gap-1.5 px-2",disabled:!s,children:[t.jsx(He,{className:"h-3.5 w-3.5"}),"预览"]})}),t.jsxs(p,{variant:"ghost",className:"h-8 gap-1.5 px-2",disabled:!s||!c.import_enabled,title:c.import_enabled?void 0:g,onClick:()=>Ae(s),children:[t.jsx(at,{className:"h-3.5 w-3.5"}),"改名"]}),t.jsxs(p,{variant:"ghost",className:"h-8 gap-1.5 px-2",disabled:!s||!c.import_enabled,title:c.import_enabled?void 0:g,onClick:()=>Pe(s),children:[t.jsx(Ge,{className:"h-3.5 w-3.5"}),"移动"]}),t.jsxs(p,{variant:"ghost",className:"h-8 gap-1.5 px-2 text-danger",disabled:!s||!c.import_enabled,title:c.import_enabled?void 0:g,onClick:()=>{Q([s])},children:[t.jsx(le,{className:"h-3.5 w-3.5"}),"删除"]})]})})]},s||e.name)})})]})}),t.jsx("div",{className:"mt-1 text-sm font-medium",children:"任务状态"}),q.length===0?t.jsx("p",{className:"text-sm text-muted",children:"暂无任务"}):t.jsx("div",{className:"grid gap-2",children:q.slice(0,20).map(e=>t.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-md border border-border bg-surface p-3",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"truncate font-mono text-xs text-text",children:e.pathText}),t.jsxs("div",{className:"text-xs text-muted",children:[e.kind," · ",e.status]}),e.error?t.jsx("div",{className:"truncate text-xs text-danger",children:e.error}):null]}),t.jsxs(J,{variant:e.status==="success"?"ok":e.status==="failed"?"bad":"neutral",children:[e.status==="running"?t.jsx(tt,{className:"mr-1 h-3 w-3 animate-spin"}):null,e.status]})]},e.rowId))})]})]})})}Ee.createRoot(document.getElementById("root")).render(t.jsx(Fe.StrictMode,{children:t.jsx(mt,{})}));
